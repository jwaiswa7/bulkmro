<div class="col-lg-12">
  <%= render layout: 'overseers/inquiries/tabs_layout' do %>
    <div class="col-md-12">
      <%= button_tag(type: "submit", class: "btn btn-success btn-block rfq-review") do %>
        RFQ Review
      <% end %>
    </div>
    <% @supplier_rfqs.each do |supplier_rfq| %>
      <%= simple_form_for([:overseers, @inquiry, supplier_rfq], :html => {:class => 'needs-validation mt-3', :'novalidate' => '', :'data-parsley-validate' => ''}) do |f| %>
        <%= render 'shared/snippets/form_errors', f: f %>

        <div class="card">
          <div class="card-body">
            <div class="form-row">
              <%= f.hidden_field :id %>
              <%= f.hidden_field :inquiry_id %>

              <div class="col-12">
                <%= f.nested_fields_for :inquiry_product_suppliers, f.object.inquiry_product_suppliers do |inquiry_product_supplier| %>

                  <% if inquiry_product_supplier.object.id.present? %>

                    <div class="col-12">
                      <div class="mt-3">
                        <%= check_box_tag 'inquiry_product_supplier_ids[]', inquiry_product_supplier.object.id, false, id: "inquiry_product_supplier_id_#{inquiry_product_supplier.object.id}", class: 'custom-control-input' %>
                        <label class="custom-control-label" for="<%= "inquiry_product_supplier_id_#{inquiry_product_supplier.object.id}" %>"></label>
                        <strong>
                          <%= hidden_field_tag :inquiry_product_supplier, inquiry_product_supplier.object.id %>
                          <%= "#{inquiry_product_supplier.object.to_s}: ##{inquiry_product_supplier.object.id}" %>
                        </strong>
                      </div>
                    </div>
                    <hr>
                  <div class="form-row d-none d-md-flex">
                    <div class="col-6">
                      <div class="form-group mb-0">
                        <label>Product</label><br>
                        <%= inquiry_product_supplier.object.inquiry_product.product.to_s %>
                      </div>
                    </div>
                    <div class="col-3">
                      <div class="form-group mb-0">
                        <label>MPN</label><br>
                        <%= inquiry_product_supplier.object.inquiry_product.product.mpn %>
                      </div>
                    </div>
                    <div class="col-3">
                      <div class="form-group mb-0">
                        <label>Brand</label><br>
                        <%= inquiry_product_supplier.object.inquiry_product.product.brand.to_s %>
                      </div>
                    </div>
                  </div>
                  <br>
                  <div class="form-row d-none d-md-flex">
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :quantity, :input_html => { :value => inquiry_product_supplier.object.inquiry_product.quantity } %>
                      </div>
                    </div>
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :lead_time, input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-2">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :last_unit_price, input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-2">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :unit_cost_price, label: 'Basic Unit Price', input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :gst, label: 'GST%', input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :unit_freight, input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-2">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :final_unit_price, input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :total_price, input_html: {:'data-parsley-errors-messages-disabled' => '', :'data-parsely-no-valid-feedback' => ''} %>
                      </div>
                    </div>
                    <div class="col-1">
                      <div class="form-group mb-0">
                        <%= inquiry_product_supplier.input :remarks %>
                      </div>
                    </div>
                  </div>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <%# if is_authorized(inquiry_product_supplier, 'request_for_quote') %>
              <%= button_tag(type: "submit", class: "btn btn-warning btn-block") do %>
                <i class="fal fa-pen"></i> Update and Send Link
              <% end %>
            <%# end %>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>
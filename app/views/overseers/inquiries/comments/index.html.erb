<div class="col-lg-12">
  <% content_for :heading_byline do %>
    This will <em>'update/approve/reject <%= @inquiry %>'</em> and log it under
    <strong><%= current_overseer.full_name %></strong>.
  <% end %>

  <%= render layout: 'overseers/inquiries/tabs_layout' do %>

    <% if @sales_order.present? %>
      <%= simple_form_for(@sales_order, url: "", method: :post) do |f| %>
        <%= f.hidden_field :parent_id %>
        <%= f.hidden_field :sales_quote_id %>

        <% if f.object.errors.any? %>
          <% f.object.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        <% end %>
        <%= render 'overseers/inquiries/sales_orders/show_summary', f: f %>
      <% end %>
    <% end %>

    <section class="pb-4 pb-lg-5">
      <div id="accordion">
        <div class="card">
          <a class="btn btn-light text-left text-black-50 btn-lg btn-block" type="button" data-toggle="collapse" data-target="#internalcomments">
            Internal Comments
          </a>
          <div id="internalcomments" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
              <%= simple_form_for([:overseers, @inquiry.comments.build(:sales_order => @sales_order)], :html => {:class => 'needs-validation mt-3', :'novalidate' => '', :'data-parsley-validate' => ''}) do |f| %>
                <%= f.hidden_field :sales_order_id %>

                <%= render 'shared/snippets/form_errors', f: f %>

                <%= render 'overseers/inquiries/comments/show_comments', f: f, inquiry: @inquiry, comments: @inquiry.comments.internal_comments, sales_order: @sales_order, show_to_customer: false %>
              <% end %>
            </div>
          </div>
        </div>
        <div class="card">
          <a class="btn btn-light text-left text-black-50 btn-lg btn-block" type="button" data-toggle="collapse" data-target="#customercomments">
            Customer Comments
          </a>
          <div id="customercomments" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
              <%= simple_form_for([:overseers, @inquiry.comments.build(:sales_order => @sales_order)], :html => {:class => 'needs-validation mt-3', :'novalidate' => '', :'data-parsley-validate' => ''}) do |f| %>
                <%= f.hidden_field :sales_order_id %>
                <%= render 'shared/snippets/form_errors', f: f %>
                <%= render 'overseers/inquiries/comments/show_comments', f: f, inquiry: @inquiry, comments: @inquiry.comments.customer_comments, sales_order: @sales_order, show_to_customer: true %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </section>
  <% end %>
</div>
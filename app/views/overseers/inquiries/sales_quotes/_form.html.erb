<%= render layout: 'overseers/inquiries/tabs_layout' do %>
  <%= simple_form_for([:overseers, @inquiry, @sales_quote], :html => { :class => 'card col-md-12' }) do |f| %>
    <%= f.hidden_field :inquiry_id %>
    <% if f.object.errors.any? %>
      <% f.object.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    <% end %>

    <div class="card-body">
      <div class="form-group">
        <%= f.nested_fields_for :sales_products, wrapper_tag: :div do |sales_product| %>
          <div class="row">
            <%= sales_product.hidden_field :id %>
            <div class="col-md-2"><%= sales_product.association :inquiry_supplier, label_method: :to_s, collection: @inquiry.inquiry_suppliers, include_blank: 'Select a Line Item'%></div>
            <div class="col-md-2"><%= sales_product.input :quantity %></div>
            <div class="col-md-2"><%= sales_product.input :unit_cost_price, disabled: true %></div>
            <div class="col-md-2"><%= sales_product.input :margin_percentage %></div>
            <div class="col-md-2"><%= sales_product.input :unit_selling_price %></div>
            <div class="col-md-2">
              <%= sales_product.label :remove %>
              <div class="form-control">
                <%= sales_product.remove_nested_fields_link 'DEL' %>
              </div>
            </div>
          </div>
        <% end %>
        <%= f.add_nested_fields_link :sales_products, 'Add Product', class: 'btn btn-outline-dark' %>
        <hr />
        <%= f.submit 'Send sales quote', class: 'btn btn-success btn-block' %>
      </div>
    </div>
  <% end %>
<% end %>
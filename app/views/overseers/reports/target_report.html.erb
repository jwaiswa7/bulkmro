<% provide :container_fluid, true %>

<div class="col-lg-12 mb-0">
  <div class="page-header mb-0">
    <h2>Target Report</h2>
    <p>Target report from <strong><%= format_date_without_time(@report.start_at) %></strong> to
      <strong><%= format_date_without_time(@report.end_at) %></strong>.</p>
  </div>
</div>

<div class="col-12">
  <%= render layout: 'search_layout' do %>
    <table class="table text-center mt-3">
      <thead data-toggle="sticky">
      <tr>
        <th></th>
        <th class="text-uppercase text-black-50" colspan="3">Inquiries</th>
        <th class="text-uppercase text-black-50" colspan="3">Orders</th>
        <th class="text-uppercase text-black-50" colspan="3">Order Margins</th>
        <th class="text-uppercase text-black-50" colspan="3">Invoices</th>
        <th class="text-uppercase text-black-50" colspan="3">Invoice Margins</th>
      </tr>
      <tr>
        <th></th>
        <% @data.summary_entries[:inquiries].each do |key, value| %>
          <td><h5 class="mb-0 text-black-50"><%= key %></h5></td>
        <% end %>
        <% @data.summary_entries[:orders].each do |key, value| %>
          <td><h5 class="mb-0 text-black-50"><%= key %></h5></td>
        <% end %>
        <% @data.summary_entries[:order_margins].each do |key, value| %>
          <td><h5 class="mb-0 text-black-50"><%= key %></h5></td>
        <% end %>
        <% @data.summary_entries[:invoices].each do |key, value| %>
          <td><h5 class="mb-0 text-black-50"><%= key %></h5></td>
        <% end %>
        <% @data.summary_entries[:invoice_margins].each do |key, value| %>
          <td><h5 class="mb-0 text-black-50"><%= key %></h5></td>
        <% end %>
      </tr>
      <tr>
        <th class="text-right no-sort"></th>
        <% @data.summary_entries[:inquiries].each do |key, value| %>
          <td data-toggle="tooltip">
            <strong><%= value %></strong>
          </td>
        <% end %>
        <% @data.summary_entries[:orders].each do |key, value| %>
          <td data-toggle="tooltip">
            <strong><%= value %></strong>
          </td>
        <% end %>
        <% @data.summary_entries[:order_margins].each do |key, value| %>
          <td data-toggle="tooltip">
            <strong><%= value %></strong>
          </td>
        <% end %>
        <% @data.summary_entries[:invoices].each do |key, value| %>
          <td data-toggle="tooltip">
            <strong><%= value %></strong>
          </td>
        <% end %>
        <% @data.summary_entries[:invoice_margins].each do |key, value| %>
          <td data-toggle="tooltip">
            <strong><%= value %></strong>
          </td>
        <% end %>
      </tr>
      </thead>
      <tbody>
        <% @data.entries.each do |overseer , value| %>
          <tr>
            <td class="text-right"><strong><%= Overseer.find(overseer).full_name %></strong></td>
            <% @data.entries[overseer].each do |target, target_value| %>
              <td><%= target_value %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
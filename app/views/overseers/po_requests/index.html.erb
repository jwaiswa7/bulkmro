<%= provide :container_fluid, true %>
<%# provide :can_be_directly_created, true %>
<% provide :can_be_ajaxed, true %>
<% provide :wrap_whitespace, true %>

<% content_for :heading do %>
  <%= action_name == 'index' ? 'Completed' : (action_name == 'pending_and_rejected')? 'Pending' : action_name.capitalize %> Purchase Order Requests
<% end %>

<% content_for(:heading_buttons) do %>
  <% if policy(:sales_order).index? %>
    <a href = "<%= new_overseers_po_request_path(:stock_inquiry_id => 20733) %>" class=" btn btn-success btn-rounded align-self-center btn-block-sm-down mr-md-1 mb-md-0 mb-1" >
      <i class="fal fa-plus-circle mr-1"></i>New Stock <%= controller_path.split('/').last.singularize.split("_").join(" ").upcase %>
    </a>
  <% end %>
  <% if policy(:sales_order).index? %>
    <a href = "<%= overseers_sales_orders_path %>" class=" btn btn-success btn-rounded align-self-center btn-block-sm-down mr-md-1 mb-md-0 mb-1" >
      <i class="fal fa-plus-circle mr-1"></i>New <%= controller_path.split('/').last.singularize.split("_").join(" ").upcase %>
    </a>
  <% end %>
<% end %>

<% content_for :hide_table_desc do %>
<!--  To Do Filters-->
<% end %>

<% content_for :header_row do %>
  <th class="no-sort all" data-width="70px"></th>
  <th class="no-sort desktop" data-name="po_request_no">PO Request No.</th>
  <th class="no-sort desktop text-right" data-name="inquiry">Inquiry</th>
  <th class="no-sort all text-right" data-name="order">Order</th>
  <th class="no-sort all text-right" data-name="po_number">PO no.</th>
  <th class="no-sort all" data-name="inside_sales">Inside Sales</th>
  <th class="no-sort all" data-name="supplier">Supplier</th>
  <th class="no-sort all" data-name="sp">Selling Price</th>
  <th class="no-sort all" data-name="cp">Cost Price</th>
  <th class="no-sort all" data-name="po_margin">PO Margin %</th>
  <th class="no-sort all" data-name="overall_margin">Overall Margin %</th>
  <th class="no-sort all">Committed Delivery Date</th>
  <th class="no-sort all">Committed Supplier Dispatch Date</th>
  <th class="no-sort all">Committed Supplier Delivery Date</th>
  <th class="no-sort desktop">Status</th>
  <th class="no-sort all" data-name="logistics_owner">Logistics Owner</th>
  <th class="sort desktop" data-name="created_at">Requested At</th>
  <th class="no-sort desktop" data-name="name">Updated At</th>
  <th class="no-sort desktop">Latest Comment</th>
<% end %>

<div class="col-lg-12">
  <%= render layout: 'shared/layouts/datatable' do %>
  <% end %>
</div>
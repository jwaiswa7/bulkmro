<% provide :can_be_ajaxed, true %>
<% provide :wrap_whitespace, true %>
<% provide :container_fluid, true %>
<% provide :can_be_directly_exported_filtered_records, true %>
<% provide :can_be_directly_exported, true %>
<% provide :can_be_directly_exported_partial, true %>
<% provide :heading_buttons do %>
  <div class="btn-group">
    <a href="<%= export_all_overseers_sales_orders_path(format: :csv) %>" class="btn btn-success btn-rounded align-self-center btn-block-sm-down ml-1 mb-md-0 mb-1" data-toggle="tooltip" title="All sales orders"><i class="fal fa-download mr-1"></i>Sales
      Orders</a>
    <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"></button>
    <div class="dropdown-menu dropdown-menu-right">
      <% status_process = ['Enqueued','Processing'] %>
      <% export_status =  Export.send(controller_path.split('/').last).not_filtered.last %>
      <a class="dropdown-item export-button" href="<%= status_process.include?(export_status.status) ? '' : export_for_logistics_overseers_sales_orders_path(format: :csv) %>">Sales Orders
        (Logistics)</a>
      <a class="dropdown-item export-button" href="<%= status_process.include?(export_status.status) ? '' : export_rows_overseers_sales_orders_path(format: :csv) %>">Sales Order Rows</a>
      <a class="dropdown-item export-button" href="<%= status_process.include?(export_status.status) ? '' : export_rows_in_bible_format_overseers_sales_orders_path(format: :csv) %>">Sales Order Rows(Bible Format)</a>
      <a class="dropdown-item export-button" href="<%= status_process.include?(export_status.status) ? '' : export_for_sap_overseers_sales_orders_path(format: :csv) %>">Sales Order
        (SAP)</a>
      <% if is_authorized(:sales_order, 'export_for_reco') && policy(:sales_order).export_for_reco? %>
        <a class="dropdown-item export-button" href="<%= status_process.include?(export_status.status) ? '' : export_for_reco_overseers_sales_orders_path(format: :csv) %>">Sales Order
          For Inquiry RECO</a>
      <% end %>
    </div>
  </div>
<% end %>

<div class="col-lg-12 bmro-table-layout">
  <% content_for :header_row do %>
    <th class="no-sort all bmro-sales-action-th" width="98" style="display: table-cell;">Quick Actions</th>
    <th class="sort all text-right" width="98px" data-name="order_number">Order</th>
    <th class="sort desktop text-left bmro-sales-orderdate" data-name="mis_date">Order Date</th>
    <th class="sort desktop text-left" width="82px" data-name="customer_committed_date">Committed Date</th>
    <th class="sort desktop text-right" width="78px" data-name="inquiry_number">Inquiry</th>
    <th class="no-sort desktop text-right" width="88px" data-name="invoice_total">Sales Invoices</th>
    <th class="no-sort desktop text-right" width="172px">PO # - Subject</th>
    <th class="no-sort desktop text-left" width="98px" data-name="status">Status</th>
    <th class="no-sort desktop text-left" width="136px" data-name="remote_status">SAP Status</th>
    <th class="no-sort desktop text-left" width="130px" data-name="account_id">Account</th>
    <th class="no-sort desktop text-left" width="96px" data-name="inside_sales_executive">Inside Sales</th>
    <th class="no-sort desktop text-left" width="96px" data-name="outside_sales_executive">Outside Sales</th>
    <th class="sort desktop text-right" width="108px" data-name="quote_total">Quote Total</th>
    <th class="sort desktop text-right" width="108px" data-name="order_total">Order Total</th>
    <th class="no-sort desktop text-right" width="76px" data-name="margin">Margin</th>
    <th class="no-sort desktop text-right bmro-iq-th" data-name="margin">Invoiced Qty</th>
    <th class="sort desktop text-left bmro-cd-th" data-name="created_at">Created Date</th>
    <th class="no-sort desktop text-left" width="136px">SAP Status</th>
  <% end %>
  <% content_for :filter_row do %>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="daterange"></td>
    <td data-filter="daterange"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="dropdown"></td>
    <td data-filter="dropdown"></td>
    <td data-filter="ajax"></td>
    <td data-filter="dropdown"></td>
    <td data-filter="dropdown"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
    <td data-filter="false"></td>
  <% end %>

  <%= render layout: 'shared/layouts/datatable' do %>
  <% end %>
  <div class="open-modal-form"></div>
</div>
<div class="col-lg-12">
  <section class="pt-3 pt-lg-4 pb-2">
    <div class="d-md-flex justify-content-between">
      <h3 class="display-5 d-flex align-items-center">
        <%= @mrf.purchase_order.po_number %>
      </h3>
      <span>
        <% if policy(@mrf).edit? %>
        <a href="<%= edit_overseers_purchase_order_material_readiness_followup_path(@mrf.purchase_order, @mrf) %>" class="btn btn-warning btn-rounded align-self-center btn-block-sm-down"><i class="fal fa-pen mr-1"></i>
          Edit Material Readiness Followup</a>
      <% end %>
        <% if policy(@mrf).confirm_delivery? %>
        <a href="<%= confirm_delivery_overseers_purchase_order_material_readiness_followup_path(@mrf.purchase_order, @mrf) %>" class="btn btn-success btn-rounded align-self-center btn-block-sm-down"><i class="fal fa-check mr-1"></i>
          Confirm Delivery</a>
      <% end %>
      </span>
    </div>
  </section>

  <section class="mb-3">
    <div class="card">
      <div class="card-body">
        <div>
          <h6 class="text-uppercase text-black-50 mb-1">Material Readiness Followup Details</h6>
          <div class="form-row">
            <% if @mrf.purchase_order.present? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Purchase Order Number</strong>
                <%= @mrf.purchase_order.po_number %>
              </div>
            <% end %>

            <% if @mrf.status? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Status</strong>
                <%= @mrf.status.titleize %>
              </div>
            <% end %>

            <% if @mrf.logistics_owner.present? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Logistics Owner</strong>
                <%= @mrf.logistics_owner.full_name %>
              </div>
            <% end %>

            <% if @mrf.expected_dispatch_date? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Expected Dispatch Date</strong>
                <%= format_date(@mrf.expected_dispatch_date) %>
              </div>
            <% end %>

            <% if @mrf.expected_delivery_date? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Expected Delivery Date</strong>
                <%= format_date(@mrf.expected_delivery_date) %>
              </div>
            <% end %>

            <% if @mrf.actual_delivery_date? %>
              <div class="col-6 col-md-3 mb-2">
                <strong class="d-block">Actual Delivery Date</strong>
                <%= format_date(@mrf.actual_delivery_date) %>
              </div>
            <% end %>
          </div>
        </div>

        <div class="mt-3">
          <h6 class="text-uppercase text-black-50 mb-1">Product Details</h6>
          <table class="table table-bordered dt-responsive wrap-whitespace w-100" data-fixed-header="false">
            <thead>
            <tr>
              <td><strong class="d-block">Name</strong></td>
              <td><strong class="d-block">Sku</strong></td>
              <td><strong class="d-block">PO Total Quantity</strong></td>
              <td><strong class="d-block">Pickup Quantity</strong></td>
              <td><strong class="d-block">Delivered Quantity</strong></td>
            </tr>
            </thead>
            <tbody>
            <% @mrf.rows.each do |row| %>
              <tr>
                <td><%= row.purchase_order_row.get_product.name %></td>
                <td><%= row.purchase_order_row.get_product.sku %></td>
                <td><%= row.purchase_order_row.quantity %></td>
                <td><%= row.pickup_quantity %></td>
                <td><%= row.delivered_quantity || 'N/A' %></td>
              </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>
<% if Rails.env.production? %>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76872832-3"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      document.addEventListener('turbolinks:load', function (event) {
          if (typeof gtag === 'function') {
              gtag('js', new Date());
              gtag('config', 'UA-76872832-3', {
                  'page_title' : event.target.title,
                  'page_path': event.data.url.replace(window.location.protocol + "//" + window.location.hostname, ""),
                  'page_location': event.data.url
              });
          }
      });
      document.getElementById("global-search").addEventListener("click", function(){
          if (typeof gtag === 'function') {
              gtag('js', new Date());
              gtag('config', 'UA-76872832-3');
              gtag('event', 'global-search', {
                  'event_category': 'search',
                  'event_label': 'Global Search',
                  'value': '1'
              });
          }
      });
  </script>
<% end %>
<div class="col-12">
  <%= simple_form_for([:customers, @cart], :url => customers_customer_orders_path, :method => :post) do |cart| %>
  <section class="pt-3 pt-lg-4 pb-2 pb-lg-3">
    <div class="d-md-flex justify-content-between">
      <h1 class="display-5 mb-1">Cart</h1>
      <%= cart.hidden_field 'id' %>
      <% unless cart.object.items.size.zero? %>
        <div>
          <%= link_to customers_customer_orders_path(contact_id: current_contact.id), method: :post, :class => "btn btn-success btn-block" do %>
            <i class="fal fa-shopping-cart mr-1"></i> Checkout
          <% end %>
        </div>
      <% end %>
    </div>
    <p class="lead mt-1">
      You have <strong><%= cart.object.items.size %></strong> products in your cart.
    </p>
  </section>

  <div class="card mb-2">
    <div class="card-body py-2">
      <div class="text-left">
        <%= cart.simple_fields_for :items do |cart_item| %>
          <div class="<% if cart_item.object != cart.object.items.last %>border-bottom <% end %> py-2 d-flex flex-row align-items-center">
            <img class="" src="https://images.homedepot-static.com/productImages/40844572-aeb6-4397-a347-5b1c2e5b44ac/svn/sharkbite-ball-valves-22222-0000lf-64_1000.jpg" width="60" />
            <div class="ml-3 flex-grow-1">
              <%= link_to customers_cart_item_path(cart_item.object), :class => 'text-danger float-right', :data => {:method => "delete"} do %>
                <i class="fal fa-times"></i>
              <% end %>
              <p class="text-black-50 m-0 p-0"><strong><%= cart_item.object.product.name %></strong></p>
              <%= cart_item.input_field :quantity  %>
              <%= hidden_field_tag 'contact_id', current_contact.id %>
              <%= hidden_field_tag 'page', 'edit_cart' %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="card-footer">
      <div class="form-row">
        <div class="col-md-12">
          <% if cart.object.items.size.zero? %>
            <%= link_to customers_products_path, :class => "btn btn-success btn-block" do %>
              <i class="fal fa-shopping-cart mr-1"></i> Add Products
            <% end %>
          <% else %>
            <%= button_tag(type: "submit", class: "btn btn-success btn-block") do %>
              <i class="fal fa-shopping-cart mr-1"></i> Checkout
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <% end %>
</div>


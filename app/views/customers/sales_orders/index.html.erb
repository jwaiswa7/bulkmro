<% provide :container_fluid, true %>
<% provide :can_be_ajaxed, true %>
<% provide :wrap_whitespace, true %>
<% provide :use_url_as_page_title, true %>
<% provide :show_date_filter, true %>
<% content_for :heading do %>
  Orders
<% end %>

<% if !is_api_request? && Company::DISABLE_DOWNLOAD_COMPANIES.exclude?(current_company.name) %>
  <% provide :heading_buttons do %>
    <div class="btn-group">
      <% if current_company.id == 1847 %>
        <a href="#export-filters" class="btn btn-success btn-rounded align-self-center btn-block-sm-down ml-1 mb-md-0 mb-1 order-filter" data-toggle="modal" title="All sales orders"><i class="bmro-download-icon"></i>Orders</a>
      <% else %>
        <a href="<%= export_all_customers_orders_path(format: :csv) %>" class="btn btn-success btn-rounded align-self-center btn-block-sm-down ml-1 mb-md-0 mb-1" data-toggle="tooltip" title="bmro-download-icon"><i class="fal fa-download mr-1"></i>Orders</a>
      <% end %>
    </div>
  <% end %>
<% end %>

<%= render partial: 'customers/sales_orders/order_filters' %>

<% content_for :header_row do %>
  <th class="no-sort all"></th>
  <th class="no-sort all" data-name="order_number">Order #</th>
  <th class="no-sort desktop text-right" data-name="created_at">Order Date</th>
  <th class="no-sort desktop" data-name="">PO #</th>
  <th class="no-sort desktop text-right" data-name="">PO Date</th>
  <th class="no-sort all" data-name="order_number">Inquiry #</th>
  <th class="no-sort desktop text-right" data-name="cp_ship_to">Ship To</th>
  <th class="no-sort desktop text-right" data-name="">Company</th>
  <th class="no-sort desktop" data-name="">Order Total</th>
  <th class="no-sort desktop text-right" data-name="">Expected Delivery Date</th>
  <th class="no-sort desktop text-right" data-name="">Actual Delivery Date</th>
  <th class="no-sort desktop text-right" data-name="cp_status">Order Status</th>
  <th class="sort desktop text-left" data-name="created_at">Created</th>
<% end %>

<% content_for :filter_row do %>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="ajax"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="false"></td>
  <td data-filter="dropdown"></td>
  <td data-filter="daterange"></td>
<% end %>

<div class="col-lg-12">
  <%= render layout: 'shared/layouts/datatable' do %>
  <% end %>
</div>
